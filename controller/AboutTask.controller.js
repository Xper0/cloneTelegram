sap.ui.define(["sap/ui/core/mvc/Controller","../model/formatter","sap/ui/model/json/JSONModel","sap/ui/core/routing/History"],function(t,e,s,o){"use strict";return t.extend("cloneTelegramApp.cloneTelegram.controller.Tasks",{formatter:e,onInit:function(){let t=this.byId("processflow");let e=t.getAggregation("lanes");let s=[{state:"Positive",value:100}];e[0].setProperty("state",s);e[1].setProperty("state",s);let o=this.getOwnerComponent().getRouter();o.getRoute("AboutTask").attachMatched(this._onObjectMatched,this)},_onObjectMatched:async function(t){let e=this.byId("processflow");let s=t.getParameter("arguments").AboutTaskId;let o=this.getOwnerComponent().getModel("ListTasks").getData().tasksList;console.log(o);let n=o.findIndex(t=>t.id==s);console.log(o[n].chatId);this.getOwnerComponent().loadTasks().then(()=>{let t=`/tasksList/${n}`;let e=this.byId("LaneHeader");console.log(e);this.getView().bindElement({path:t,model:"ListTasks"})});this.oCommentsTask=this.getOwnerComponent().getModel("CommentsTask");let a=`http://127.0.0.1:5000/getCommentTask?commentTaskId=${s}`;let i=await fetch(a);let l=await i.json();console.log(l);this.oCommentsTask.setProperty("/comments",l.message);console.log(this.oCommentsTask)},onNavBack:function(){let t=this.getOwnerComponent().getRouter();let e=o.getInstance().getPreviousHash();console.log(e);if(e!==undefined){window.history.back()}else{t.navTo("Tasks",{},true)}},onEditTask:function(t){let e=this.getOwnerComponent().getRouter();const s=t.getSource().getBindingContext("ListTasks").getObject();e.navTo("EditTask",{editTaskId:s.id})},onBeginTask:function(){let t=this.byId("processflow");let e=t.getAggregation("lanes");let s=[{state:"Positive",value:100}];e[2].setProperty("state",s)},onEdit:function(t){let e=this.byId("ProductList");let s=e.getAggregation("items");let o=t.getSource().getProperty("label");let n=new sap.m.InputListItem({label:"Подзадача6",type:sap.m.ListType.Detail,highlight:"Error",press:this.onEdit});let a=new sap.m.Input({value:o});n.addContent(new sap.m.Switch({type:sap.m.SwitchType.AcceptReject,state:false}));n.addContent(a);e.insertItem(n);console.log(n)},onAddCheckList:function(){let t=this.byId("ProductList");let e=new sap.m.InputListItem({label:"",type:sap.m.ListType.Detail,highlight:"Error",press:this.onEdit});let s=new sap.m.Input({value:"",width:"30%"});e.addContent(s);e.addContent(new sap.m.Switch({type:sap.m.SwitchType.AcceptReject,state:false}));t.addItem(e)}})});