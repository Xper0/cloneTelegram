<mvc:View
  xmlns="sap.m"
  xmlns:f="sap.ui.layout.form"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  xmlns:commons="sap.suite.ui.commons"
  xmlns:u="sap.ui.unified"
  controllerName='cloneTelegramApp.cloneTelegram.controller.AboutTask'>
  <Page
    title="{ListTasks>title}"
    enableScrolling="true"
    showNavButton="true"
    navButtonPress=".onNavBack"
    class="sapUiContentPadding sapUiResponsivePadding--header sapUiResponsivePadding--subHeader sapUiResponsivePadding--content sapUiResponsivePadding--footer"
  >
    <content>
      <ObjectHeader
        responsive="true"
        backgroundDesign="Solid"
        fullScreenOptimized="false"
        class="sapUiResponsivePadding--header formLabel formText "
      >
        <headerContainer>
          <HeaderContainer  id="headerContainer">
            <commons:ProcessFlow
              id="processflow"
              nodePress="onNodePress"
            >
              <commons:lanes>
                <commons:ProcessFlowLaneHeader
                  id="LaneHeader"
                  iconSrc="sap-icon://message-success"
                  text="Новая"
                  position="0"
                />
                <commons:ProcessFlowLaneHeader
                  iconSrc="sap-icon://message-success"
                  text="Назначено "
                  position="1"
                />
                <commons:ProcessFlowLaneHeader
                  iconSrc="sap-icon://message-success"
                  text="Взят в работу"
                  position="2"
                />
                <commons:ProcessFlowLaneHeader
                  iconSrc="sap-icon://laptop"
                  text="Выполлнено"
                  position="3" />
                <commons:ProcessFlowLaneHeader
                  iconSrc="sap-icon://message-success"
                  text="Закрыто"
                  position="4"
                />
              </commons:lanes>
            </commons:ProcessFlow>
          </HeaderContainer>
        </headerContainer>
        <attributes>
          <ObjectAttribute
            class="formText"
            title="Постановщик"
            text="{ListTasks>supervisor}"/>
          <ObjectAttribute
            title="Ответсвенный"
            text="{ListTasks>responsible}"/>
        </attributes>
        <ObjectAttribute
          title="Дедлайн"
          text="{
        path : 'ListTasks>date',
        formatter : '.formatter.getData'
        }"/>
        <statuses>
          <ObjectStatus
            class="formLabel"
            title="Важность"
            text="{ListTasks>importance}"
            state="{  path : 'ListTasks>importance',
							formatter: '.formatter.getImportance'}"/>
        </statuses>
      </ObjectHeader>
    <FlexBox justifyContent="Center" direction="Column"  >
      <VBox justifyContent="Center" alignItems="Center">
<!--        <commons:ProcessFlow-->
<!--          id="processflow1"-->
<!--          nodePress="onNodePress"-->
<!--        >-->
<!--          <commons:lanes>-->
<!--            <commons:ProcessFlowLaneHeader-->
<!--              id="LaneHeader"-->
<!--              iconSrc="sap-icon://message-success"-->
<!--              text="Взят в работу"-->
<!--              position="0"-->
<!--            />-->
<!--            <commons:ProcessFlowLaneHeader-->
<!--              laneId="{id1}"-->
<!--              iconSrc="sap-icon://laptop"-->
<!--              text="На тестировании"-->
<!--              position="1" />-->
<!--          </commons:lanes>-->
<!--        </commons:ProcessFlow>-->
      </VBox>
      <VBox justifyContent="SpaceAround" alignItems="SpaceAround" >
        <!--    <content>-->
        <f:Form id="editFormTask"
                editable="true"
                ariaLabelledBy="Title1"
                class="formLabel formText "
        >
          <f:layout>
            <f:ColumnLayout
              columnsM="1"
              columnsL="1"
              columnsXL="1"
            />
          </f:layout>
          <f:formContainers >
            <f:FormContainer id="form" ariaLabelledBy="Title2">
              <f:formElements>
                <f:FormElement label="Описание задачи">
                  <f:fields>
                    <Text text="{ListTasks>description}" />
                  </f:fields>
                </f:FormElement>
<!--                <f:FormElement label="Дедлайн">-->
<!--                  <f:fields>-->
<!--                    <Text text="{-->
<!--                                   path : 'ListTasks>date',-->
<!--					    	formatter : '.formatter.getData'-->
<!--                    }" />-->
<!--&lt;!&ndash;                    <ObjectIdentifier&ndash;&gt;-->
<!--&lt;!&ndash;                      title="&ndash;&gt;-->
<!--&lt;!&ndash;              {&ndash;&gt;-->
<!--&lt;!&ndash;                path : 'ListTasks>date',&ndash;&gt;-->
<!--&lt;!&ndash;					    	formatter : '.formatter.getData'&ndash;&gt;-->
<!--&lt;!&ndash;              }"&ndash;&gt;-->
<!--&lt;!&ndash;                    />&ndash;&gt;-->
<!--                  </f:fields>-->
<!--                </f:FormElement>-->
<!--                <f:FormElement label="Важность">-->
<!--                  <f:fields>-->
<!--&lt;!&ndash;                    <Text text="{ListTasks>importance}" />&ndash;&gt;-->
<!--                    <ObjectNumber-->
<!--                      unit="{ListTasks>importance}"-->
<!--                      state="{-->
<!--						  path : 'ListTasks>importance',-->
<!--							formatter: '.formatter.getImportance'-->
<!--						  }"-->
<!--                    />-->
<!--                  </f:fields>-->
<!--                </f:FormElement>-->
<!--                <f:FormElement label="Постановщик">-->
<!--                  <f:fields>-->
<!--                    <Text text="{ListTasks>supervisor}" />-->
<!--                  </f:fields>-->
<!--                </f:FormElement>-->
<!--                <f:FormElement label="Ответсвенный">-->
<!--                  <f:fields>-->
<!--                    <Text text="{ListTasks>responsible}" />-->
<!--                  </f:fields>-->
<!--                </f:FormElement>-->
              </f:formElements>
            </f:FormContainer>
          </f:formContainers>
        </f:Form>
        <!--    </content>-->
        <!--    <footer>-->
<!--        <HBox justifyContent="SpaceAround" >-->
<!--          <Button text="Редактировать задачу" type="Emphasized" press="onEditTask" />-->
<!--          <Button text="Завершить" />-->
<!--        </HBox>-->
        <!--    </footer>-->
      </VBox>
      <VBox>
          <IconTabBar
            id="iconTabBar"
            headerBackgroundDesign="Transparent"
            class="sapUiResponsiveContentPadding"
            binding="{Resume}"
            select=".onTabSelect"
            selectedKey="{view>/selectedTabKey}">
            <items>
              <IconTabFilter id="infoTab" text="Комментарии" key="Info">
                <ScrollContainer>

                </ScrollContainer>
                <VBox>
                <List
                  growingScrollToLoad="true"
                  growingThreshold="5"
                  items="{
					path : 'CommentsTask>/comments/messages',
					sorter : {
						path : 'date'
					}
				}"
                >
                  <FeedListItem
                    sender="{
            parts: [
             {path: 'CommentsTask>fromId'},
             {path: 'CommentsTask>/comments/users'}
          ],

					    	formatter : '.formatter.getUser'}"
                    icon="{AuthorPicUrl}"
                    senderPress="onSenderPress"
                    iconPress="onIconPress"
                    iconDensityAware="false"
                    info="{Type}"
                    timestamp="{
        path : 'CommentsTask>date',
					    	formatter : '.formatter.getData'
        }"
                    text="{CommentsTask>message}"
                    convertLinksToAnchorTags="All"/>
                </List>
                </VBox>
                <VBox  width="100%">
                    <FeedInput
                      width="100%"
                      post="onPost"
                      icon="{CommentsTask>/img}"
                      class="sapUiSmallMarginTopBottom"
                    />
                </VBox>
              </IconTabFilter>
              <IconTabFilter id="projectsTab" text="История" key="Projects">
                <Text text="История"/>
              </IconTabFilter>
            </items>
          </IconTabBar>
      </VBox>
    </FlexBox>
    </content>
    <footer>
      <Toolbar>
        <Button text="Начать выполнение" type="Accept" press="onBeginTask" />
        <Button text="Завершить задачу" type="Success"/>
        <ToolbarSpacer/>
        <Button text="Редактировать задачу" type="Attention" press="onEditTask" />

      </Toolbar>
    </footer>
  </Page>

</mvc:View>

